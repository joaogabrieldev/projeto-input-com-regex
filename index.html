<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Input com RegEx</title>
    <style>
        /* * {
            margin: 0;
            padding: 0;
        } */
    </style>

</head>

<body>
    <h1>Input's com RegEx</h1>
    <div class="container">
        <div class="div-input-cpf">
            <label for="input-cpf">CPF: </label>
            <input type="text" inputmode="numeric" id="input-cpf" placeholder="Adicione seu CPF aqui" pattern="^[0-9]$"
                maxlength="14" required>
        </div>

        <div>
            <label for="input-tel">Telefone: </label>
            <input type="text" id="input-tel" placeholder="Adicione seu número aqui" pattern="^[0-9]$" maxlength="14"
                required>
        </div>
    </div>
    <script>
        // Formatação automática do CPF 
        const InputCPF = document.getElementById('input-cpf')

        InputCPF.addEventListener('input', (event) => {
            formatarCPF(event.target)
        })

        function formatarCPF(input) {
            let valorLimpo = input.value.replace(/\D/g, '')

            if (valorLimpo.length > 11) {
                valorLimpo = valorLimpo.slice(0, 11)
            }

            let valorFormatado = valorLimpo

            if (valorLimpo.length > 3) {
                valorFormatado = valorLimpo.replace(/(\d{3})(\d)/, '$1.$2')
            }

            if (valorLimpo.length > 6) {
                valorFormatado = valorLimpo.replace(/(\d{3})(\d{3})(\d)/, '$1.$2.$3')
            }

            if (valorLimpo.length > 9) {
                valorFormatado = valorLimpo.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/, '$1.$2.$3-$4')
            }


            input.value = valorFormatado
        }

        const InputTEL = document.getElementById('input-tel')

        InputTEL.addEventListener('input', (event) => {
            formatarTEL(event.target)
        })

        function formatarTEL(input) {
            let valorLimpo = input.value.replace(/\D/g, '')

            if (valorLimpo.length > 11) {
                valorLimpo.slice(0, 11)
            }

            let valorFormatado = valorLimpo

            // DDD
            if (valorLimpo.length > 2) {
                valorFormatado = valorLimpo.replace(/(\d{2})(\d)/, '($1) $2')
            }

            //Número Formatado
            if (valorLimpo.length > 7) {
                valorFormatado = valorLimpo.replace(/(\d{2})(\d{5})(\d{4})/, '($1) $2-$3')
            }




            input.value = valorFormatado
        }

    </script>
</body>

</html>